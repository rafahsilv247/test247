(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3041:(e,a,r)=>{Promise.resolve().then(r.bind(r,6865))},6865:(e,a,r)=>{"use strict";r.d(a,{EpubTranslator:()=>$});var s=r(5155),t=r(2115),l=r(9708),n=r(2085),i=r(2596),d=r(9688);function o(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,d.QP)((0,i.$)(a))}let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=t.forwardRef((e,a)=>{let{className:r,variant:t,size:n,asChild:i=!1,...d}=e,u=i?l.DX:"button";return(0,s.jsx)(u,{className:o(c({variant:t,size:n,className:r})),ref:a,...d})});u.displayName="Button";let f=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t})});f.displayName="Card";let m=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:o("flex flex-col space-y-1.5 p-6",r),...t})});m.displayName="CardHeader";let p=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:o("text-2xl font-semibold leading-none tracking-tight",r),...t})});p.displayName="CardTitle";let g=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:o("text-sm text-muted-foreground",r),...t})});g.displayName="CardDescription";let x=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:o("p-6 pt-0",r),...t})});x.displayName="CardContent";let h=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:o("flex items-center p-6 pt-0",r),...t})});h.displayName="CardFooter";let v=t.forwardRef((e,a)=>{let{className:r,type:t,...l}=e;return(0,s.jsx)("input",{type:t,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:a,...l})});v.displayName="Input";var b=r(968);let y=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(b.b,{ref:a,className:o(y(),r),...t})});j.displayName=b.b.displayName;var N=r(8550),w=r(6474),R=r(7863),C=r(5196);let k=N.bL;N.YJ;let P=N.WT,U=t.forwardRef((e,a)=>{let{className:r,children:t,...l}=e;return(0,s.jsxs)(N.l9,{ref:a,className:o("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[t,(0,s.jsx)(N.In,{asChild:!0,children:(0,s.jsx)(w.A,{className:"h-4 w-4 opacity-50"})})]})});U.displayName=N.l9.displayName;let A=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(N.PP,{ref:a,className:o("flex cursor-default items-center justify-center py-1",r),...t,children:(0,s.jsx)(R.A,{className:"h-4 w-4"})})});A.displayName=N.PP.displayName;let E=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(N.wn,{ref:a,className:o("flex cursor-default items-center justify-center py-1",r),...t,children:(0,s.jsx)(w.A,{className:"h-4 w-4"})})});E.displayName=N.wn.displayName;let L=t.forwardRef((e,a)=>{let{className:r,children:t,position:l="popper",...n}=e;return(0,s.jsx)(N.ZL,{children:(0,s.jsxs)(N.UC,{ref:a,className:o("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...n,children:[(0,s.jsx)(A,{}),(0,s.jsx)(N.LM,{className:o("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,s.jsx)(E,{})]})})});L.displayName=N.UC.displayName,t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(N.JU,{ref:a,className:o("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...t})}).displayName=N.JU.displayName;let S=t.forwardRef((e,a)=>{let{className:r,children:t,...l}=e;return(0,s.jsxs)(N.q7,{ref:a,className:o("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(N.VF,{children:(0,s.jsx)(C.A,{className:"h-4 w-4"})})}),(0,s.jsx)(N.p4,{children:t})]})});S.displayName=N.q7.displayName,t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(N.wv,{ref:a,className:o("-mx-1 my-1 h-px bg-muted",r),...t})}).displayName=N.wv.displayName;var F=r(4922);let T=t.forwardRef((e,a)=>{let{className:r,value:t,...l}=e;return(0,s.jsx)(F.bL,{ref:a,className:o("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...l,children:(0,s.jsx)(F.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});T.displayName=F.bL.displayName;let _=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),z=t.forwardRef((e,a)=>{let{className:r,variant:t,...l}=e;return(0,s.jsx)("div",{ref:a,role:"alert",className:o(_({variant:t}),r),...l})});z.displayName="Alert",t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("h5",{ref:a,className:o("mb-1 font-medium leading-none tracking-tight",r),...t})}).displayName="AlertTitle";let B=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:o("text-sm [&_p]:leading-relaxed",r),...t})});B.displayName="AlertDescription";var q=r(5785);let V=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(q.bL,{className:o("grid gap-2",r),...t,ref:a})});V.displayName=q.bL.displayName;let I=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(q.q7,{ref:a,className:o("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...t,children:(0,s.jsx)(q.C1,{className:"flex items-center justify-center",children:(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-current"})})})});I.displayName=q.q7.displayName;var O=r(3314),W=r(5339),D=r(3744),J=r(1788),M=r(9311),X=r.n(M);async function G(e,a,r){try{if(!e.trim())return e;let s="https://translate.googleapis.com/translate_a/single?client=gtx&sl=".concat(a,"&tl=").concat(r,"&dt=t&q=").concat(encodeURIComponent(e)),t=await fetch(s);if(!t.ok)throw Error("Translation failed: ".concat(t.statusText));let l=await t.json(),n="";if(l&&l[0])for(let e of l[0])e[0]&&(n+=e[0]);return n||e}catch(a){return console.error("Translation error:",a),e}}async function H(e,a,r,s){let t=e.match(/(<[^>]+>)|([^<]+)/g)||[],l=[],n=Math.ceil(t.length/s);for(let e=0;e<t.length;e+=n)l.push(t.slice(e,e+n));return(await Promise.all(l.map(async e=>{let s="";for(let t of e)t.startsWith("<")?s+=t:s+=await G(t.trim(),a,r);return s}))).join("")}async function K(e,a,r,s,t,l){let n=0;for(let i=0;i<e.length;i+=t){let d=e.slice(i,i+t);await Promise.all(d.map(async i=>{var d;let o=await (null===(d=a.file(i))||void 0===d?void 0:d.async("text"));if(o){let e=await H(o,r,s,t);a.file(i,e)}l(++n/e.length*100)}))}}async function Q(e,a,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,t=arguments.length>4?arguments[4]:void 0,l=await e.arrayBuffer(),n=await X().loadAsync(l),i=Object.keys(n.files).filter(e=>e.endsWith(".html")||e.endsWith(".xhtml")||e.endsWith(".htm"));return await K(i,n,a,r,s,t),await n.generateAsync({type:"blob"})}let Y=[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"ru",name:"Russian"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"}],Z=[{value:"1",label:"1 process (Slower, less resource usage)"},{value:"2",label:"2 processes"},{value:"4",label:"4 processes (Recommended)"},{value:"8",label:"8 processes"},{value:"16",label:"16 processes (Faster, more resource usage)"}];function $(){let[e,a]=(0,t.useState)(null),[r,l]=(0,t.useState)("en"),[n,i]=(0,t.useState)("pt"),[d,o]=(0,t.useState)("4"),[c,b]=(0,t.useState)(!1),[y,N]=(0,t.useState)(0),[w,R]=(0,t.useState)(null),[C,A]=(0,t.useState)(null),E=async()=>{if(e){b(!0),N(0),R(null),A(null);try{let a=await Q(e,r,n,Number.parseInt(d),e=>{N(e)});R(a)}catch(e){A(e instanceof Error?e.message:"An error occurred during translation")}finally{b(!1)}}};return(0,s.jsxs)(f,{className:"w-full",children:[(0,s.jsxs)(m,{children:[(0,s.jsx)(p,{children:"Translate EPUB Books"}),(0,s.jsx)(g,{children:"Upload an EPUB file, select languages, customize processing speed, and get a translated version."})]}),(0,s.jsxs)(x,{className:"space-y-6",children:[(0,s.jsx)(z,{children:(0,s.jsxs)(B,{className:"flex items-center gap-2",children:[(0,s.jsx)(O.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"font-medium",children:"Performance Control:"})," Choose how many concurrent processes to use for translation."]})}),C&&(0,s.jsxs)(z,{variant:"destructive",children:[(0,s.jsx)(W.A,{className:"h-4 w-4"}),(0,s.jsx)(B,{children:C})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j,{htmlFor:"epub-file",children:"Upload EPUB File"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(v,{id:"epub-file",type:"file",accept:"application/epub+zip",onChange:e=>{var r;let s=null===(r=e.target.files)||void 0===r?void 0:r[0];s&&"application/epub+zip"===s.type?(a(s),A(null)):(a(null),A("Please select a valid EPUB file"))},disabled:c,className:"flex-1"}),e&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:e.name})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j,{htmlFor:"source-language",children:"Source Language"}),(0,s.jsxs)(k,{value:r,onValueChange:l,disabled:c,children:[(0,s.jsx)(U,{id:"source-language",children:(0,s.jsx)(P,{placeholder:"Select source language"})}),(0,s.jsx)(L,{children:Y.map(e=>(0,s.jsx)(S,{value:e.code,children:e.name},e.code))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j,{htmlFor:"target-language",children:"Target Language"}),(0,s.jsxs)(k,{value:n,onValueChange:i,disabled:c,children:[(0,s.jsx)(U,{id:"target-language",children:(0,s.jsx)(P,{placeholder:"Select target language"})}),(0,s.jsx)(L,{children:Y.map(e=>(0,s.jsx)(S,{value:e.code,children:e.name},e.code))})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j,{children:"Concurrency Level"}),(0,s.jsx)(V,{value:d,onValueChange:o,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",disabled:c,children:Z.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(I,{value:e.value,id:"concurrency-".concat(e.value)}),(0,s.jsx)(j,{htmlFor:"concurrency-".concat(e.value),className:"text-sm cursor-pointer",children:e.label})]},e.value))})]}),c&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j,{children:"Translation Progress"}),(0,s.jsx)(T,{value:y,className:"h-2"}),(0,s.jsxs)("p",{className:"text-sm text-center text-muted-foreground",children:[Math.round(y),"% complete",y>0&&y<100&&(0,s.jsxs)("span",{children:[" â€¢ Using ",d," concurrent processes"]})]})]})]}),(0,s.jsxs)(h,{className:"flex justify-between",children:[(0,s.jsxs)(u,{onClick:E,disabled:!e||c,className:"flex items-center gap-2",children:[(0,s.jsx)(D.A,{className:"h-4 w-4"}),"Translate EPUB"]}),w&&(0,s.jsxs)(u,{onClick:()=>{if(!w)return;let a=URL.createObjectURL(w),r=document.createElement("a");r.href=a,r.download=e?"translated_".concat(e.name):"translated.epub",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)},variant:"outline",className:"flex items-center gap-2",children:[(0,s.jsx)(J.A,{className:"h-4 w-4"}),"Download Translated EPUB"]})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[479,441,684,358],()=>a(3041)),_N_E=e.O()}]);